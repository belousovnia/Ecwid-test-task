(this.webpackJsonpecwid=this.webpackJsonpecwid||[]).push([[0],{15:function(e,t,n){},19:function(e,t,n){"use strict";n.r(t);var o=n(0),c=n.n(o),a=n(6),i=n.n(a),s=(n(15),n(3)),d=n(7),r=n(8),l=n(1);function u(e){return Object(l.jsx)("div",{className:"head",children:Object(l.jsxs)("div",{className:"headBlock1",children:[Object(l.jsx)("input",{type:"text",className:"inputURL",id:"inputURL"}),Object(l.jsx)("button",{className:"battonDownload",onClick:function(){return e.addNewImages(document.getElementById("inputURL").value,document.getElementById("option").value)},children:"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c"}),Object(l.jsxs)("select",{id:"option",children:[Object(l.jsx)("option",{value:"1",children:"Image"}),Object(l.jsx)("option",{value:"2",children:"JSON"})]})]},"1012")},"2011")}var m=n(4),g=n(10);function h(e){var t=Object(g.a)({onDrop:function(t){t.map((function(t){e.addNewImages(URL.createObjectURL(t),1)}))},accept:"image/jpeg, image/png"}),n=t.getRootProps,o=t.getInputProps;return Object(l.jsx)("div",Object(m.a)(Object(m.a)({},n()),{},{className:"dropZone",id:"dropZone",onDragLeave:function(){document.getElementById("dropZone").style.zIndex="-1",document.getElementById("dropZone").style.height="0.1px",document.getElementById("dropZone").style.width="0.1px"},children:Object(l.jsx)("input",Object(m.a)({},o()))}))}function j(e){return Object(l.jsxs)("div",{className:"photoBoard",id:"photoBoard",onDragOver:function(){document.getElementById("dropZone").style.zIndex="2",document.getElementById("dropZone").style.height="100%",document.getElementById("dropZone").style.width="100%"},onDrop:function(){document.getElementById("dropZone").style.zIndex="-1",document.getElementById("dropZone").style.height="0.1px",document.getElementById("dropZone").style.width="0.1px"},children:[e.countLine,Object(l.jsx)(h,{parsNewImages:e.parsNewImages,addNewImages:e.addNewImages,setCountReaction:e.setCountReaction,countReaction:e.countReaction})]})}var p=c.a.createContext();function f(e){var t=Object(o.useContext)(p);return Object(l.jsx)("div",{className:"imageBox",children:Object(l.jsx)("img",{className:"image",src:e.imagesParms.src,height:e.imagesParms.height,width:e.imagesParms.width,onClick:function(){return t(e.imagesParms.src,e.imagesParms.id)}})})}function b(e){return Object(l.jsx)("div",{className:"line",id:"qwe",children:e.line.map((function(t){return Object(l.jsx)(f,{imagesParms:t,deleteImages:e.deleteImages},e.getRandomInt())}))},"2009")}var O=n.p+"static/media/icon-trash.11387444.png";function v(e){return Object(l.jsx)("div",{className:"modalWindow",id:"modalWindow",onClick:function(){document.getElementById("modalWindow").style.display="none",e.changeModalImg("")},children:Object(l.jsxs)("div",{className:"modalContainer",children:[Object(l.jsx)("img",{className:"modalImage",src:e.src}),Object(l.jsx)("img",{src:O,className:"iconTrash",onClick:function(){e.deleteImages(e.idImage)}})]})})}var I=function(){var e=function(){function e(t,n,o,c){Object(d.a)(this,e),this.src=t,this.ratio=o/n,this.height=n,this.width=o,this.id=c}return Object(r.a)(e,[{key:"changeHidth",value:function(e){this.height=e,this.width=e*this.ratio}},{key:"changeWidth",value:function(e){this.width=e,this.height=e/this.ratio}}]),e}(),t=Object(o.useRef)(0);function n(){return t.current++,t.current}function c(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(),JSON.parse(t.response)}function a(e){var t=[];for(var n in e){var o=e[n];t.push(o.url)}return t}var i=Object(o.useState)([]),m=Object(s.a)(i,2),g=m[0],h=m[1];function f(t){var o=function(o){var c=new Image;c.src=t[o],c.addEventListener("load",(function(){var t=new e(c.src,c.height,c.width,n()),o=g;o.push(t),h(o),k(g,R)})),c.addEventListener("error",(function(){alert("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f, \u043f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430 \u043f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u0441\u0441\u044b\u043b\u043a\u0443")}))};for(var c in t)o(c)}var O=a(c("https://don16obqbay2c.cloudfront.net/frontend-test-task/gallery-images.json").galleryImages);Object(o.useEffect)((function(){return f(O)}),[]);var I=Object(o.useState)(0),y=Object(s.a)(I,2),x=(y[0],y[1],Object(o.useState)([])),w=Object(s.a)(x,2),B=w[0],N=w[1],E=Object(o.useState)(0),L=Object(s.a)(E,2),R=L[0],C=L[1];function k(e,t){N(function(e,t){0===t&&(t=document.getElementById("photoBoard").clientWidth);var n=[],o=[],c=0,a=200,i=1;t<800&&(a=150);for(var s=0;s<e.length;s++){e[s].changeHidth(a),o.push(e[s]),c=0;for(var d=0;d<o.length;d++)c+=o[d].width,i+=1;if(c+10*i>=t){i=1;for(var r=t-(c-o[o.length-1].width),l=o.pop(),u=0,m=0;m<o.length;m++)u+=o[m].ratio;for(var g=(r-10*(o.length+1))/u,h=g*o.length+10*o.length+10;h>t;)g-=.5;for(var j=0;j<o.length;j++)o[j].changeHidth(a+g-.5);n.push(o),o=[l]}s===e.length-1&&(1===o.length&&o[0].width>t-20&&o[0].changeWidth(t-20),n.push(o))}return n}(e,t).map((function(e){return Object(l.jsx)(b,{line:e,deleteImages:P,getRandomInt:n},n())})))}function P(e){for(var t=g,n=0;n<t.length;n++)if(t[n].id===e){t.splice(n,1),h(t),k(g,R);break}}function S(e,t){if(console.log(e),console.log(t),console.log("load"),1==t)console.log("1"),f([e]);else if(2==t){console.log("2");try{f(a(c(e).galleryImages))}catch(n){alert("\u0412\u043e\u0437\u043d\u0438\u043a\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 JSON \u0444\u0430\u0439\u043b\u0430, \u0443\u0431\u0435\u0434\u0438\u0442\u0435\u0441\u044c \u0447\u0442\u043e \u0441\u0441\u044b\u043b\u043a\u0430 \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442")}}document.getElementById("inputURL").value=""}Object(o.useEffect)((function(){C(document.getElementById("photoBoard").clientWidth),k(g,R)}),[R]),window.addEventListener("resize",(function(){C(document.getElementById("photoBoard").clientWidth)})),console.log(g);var Z=Object(o.useState)(""),W=Object(s.a)(Z,2),D=W[0],U=W[1],J=Object(o.useState)(),M=Object(s.a)(J,2),z=M[0],F=M[1];return Object(l.jsxs)(p.Provider,{value:function(e,t){U(e),F(t),document.getElementById("modalWindow").style.display="block"},children:[Object(l.jsx)(u,{addNewImages:S}),Object(l.jsx)("div",{className:"main",id:"main",children:Object(l.jsx)(j,{countLine:B,parsNewImages:f,addNewImages:S})}),Object(l.jsx)(v,{src:D,setCountModal:U,deleteImages:P,idImage:z,changeModalImg:function(e){U(e)}})]})},y=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,20)).then((function(t){var n=t.getCLS,o=t.getFID,c=t.getFCP,a=t.getLCP,i=t.getTTFB;n(e),o(e),c(e),a(e),i(e)}))};i.a.render(Object(l.jsx)(c.a.StrictMode,{children:Object(l.jsx)(I,{})}),document.getElementById("root")),y()}},[[19,1,2]]]);
//# sourceMappingURL=main.0f02168d.chunk.js.map